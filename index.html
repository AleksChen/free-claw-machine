<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>🎮 自由抓娃娃机 | Free Claw Machine</title>
    <meta name="description" content="基于手势控制的网页版抓娃娃机游戏" />
    <link rel="stylesheet" href="/src/ui/styles.css" />
    <!-- MediaPipe Libraries -->
    <script src="/mediapipe/hands/hands.js" defer></script>
    <script src="/mediapipe/camera_utils/camera_utils.js" defer></script>
  </head>
  <body>
    <div id="app">
      <!-- 游戏标题 -->
      <!-- 游戏标题 (已移除)
      <header class="game-header">
        <h1>🎮 自由抓娃娃机</h1>
        <p class="subtitle">用双手控制,无需任何设备</p>
      </header>
      -->

      <!-- 主游戏区域 -->
      <div class="game-container">
        <!-- 3D 渲染画布 -->
        <canvas id="game-canvas"></canvas>

        <!-- 摄像头预览 -->
        <div class="camera-preview">
          <video id="camera-video" autoplay playsinline></video>
          <canvas id="camera-canvas"></canvas>
        </div>

        <!-- 手势提示 -->
        <div class="gesture-hints">
          <div class="hint">
            <span class="hand-icon">🤚</span>
            <span class="hint-text">左手移动爪子</span>
          </div>
          <div class="hint">
            <span class="hand-icon">✊</span>
            <span class="hint-text">右手握拳抓取</span>
          </div>
        </div>

        <!-- 游戏状态面板 -->
        <div class="game-status">
          <div class="status-item">
            <span class="label">状态:</span>
            <span id="game-state" class="value">等待中...</span>
          </div>
          <div class="status-item">
            <span class="label">得分:</span>
            <span id="score" class="value">0</span>
          </div>
          <div class="status-item">
            <span class="label">帧率:</span>
            <span id="fps" class="value">0</span>
          </div>
        </div>

        <!-- 手部检测状态 -->
        <div class="hand-status">
          <div class="hand-indicator" id="left-hand">
            <span class="hand-label">左手</span>
            <span class="status-dot"></span>
          </div>
          <div class="hand-indicator" id="right-hand">
            <span class="hand-label">右手</span>
            <span class="status-dot"></span>
          </div>
          <!-- 动作展示 -->
          <div class="action-indicator" id="action-display">
            <span class="action-label">当前动作</span>
            <span id="current-action" class="action-value">待命</span>
          </div>
        </div>
      </div>

      <!-- 加载提示 -->
      <div id="loading" class="loading-overlay">
        <div class="loading-content">
          <div class="spinner"></div>
          <p>正在加载游戏...</p>
          <p class="loading-detail" id="loading-status">初始化中</p>
        </div>
      </div>

      <!-- 错误提示 -->
      <div id="error" class="error-overlay" style="display: none">
        <div class="error-content">
          <h2>⚠️ 出错了</h2>
          <p id="error-message"></p>
          <button onclick="location.reload()">重新加载</button>
        </div>
      </div>
    </div>

    <script type="module" src="/src/main.js"></script>
  </body>
</html>
